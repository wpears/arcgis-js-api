//>>built
define("dgrid/CellSelection",["dojo/_base/declare","./Selection","dojo/on","put-selector/put","dojo/has"],function(p,q,r,l,s){return p("dgrid.CellSelection",q,{selectionDelegate:".dgrid-cell",select:function(a,g,d){var c,e;void 0===d&&(d=!0);if("object"!=typeof a||!("element"in a))a=this.cell(a);else if(!a.row){for(e in d)this.select(this.cell(a.id,e),null,d[e]);return}if(this.allowSelect(a)){var f=a.row.id,b=this.selection[f];if(a.column){var m=b&&b[a.column.id];null===d&&(d=!m);var h=a.element,
b=b||{};b[a.column.id]=d;this.selection[f]=b;var n=!1;for(c in b)if(!0===b[c]){n=!0;break}n||delete this.selection[f];h&&(d?l(h,".dgrid-selected.ui-state-active"):l(h,"!dgrid-selected!ui-state-active"));d!=m&&h&&this._selectionEventQueue(d,"cells").push(a);if(g){g.element||(g=this.cell(g));b=g.element;c=a.element;d=b&&(b.compareDocumentPosition?2==b.compareDocumentPosition(c):b.sourceIndex>c.sourceIndex)?"nextSibling":"previousSibling";c=a.column.id;var b=g.column.id,k,f=[];for(e in this.columns)if(k&&
f.push(e),e==c&&(c=f)||e==b&&(b=f)){f.push(e);if(k||c==f&&e==b)break;k=!0}e=a.row.element;b=g.row.element;do{for(c=0;c<f.length;c++)a=this.cell(e,f[c]),this.select(a);if(e==b)break}while(e=a.row.element[d])}}else for(c in this.columns)this.select(this.cell(f,c),null,d)}},isSelected:function(a,g){if(!a)return!1;a.element||(a=this.cell(a,g));return this.selection[a.row.id]&&!!this.selection[a.row.id][a.column.id]},clearSelection:function(a){a=!1;this.inherited(arguments)}})});