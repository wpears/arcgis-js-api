//>>built
define("dgrid/extensions/Pagination","../_StoreMixin dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/query dojo/string dojo/has put-selector/put dojo/i18n!./nls/pagination dojo/_base/sniff xstyle/css!../css/extensions/Pagination.css".split(" "),function(u,v,w,r,m,s,t,q,d,x){return v("dgrid.extensions.Pagination",u,{rowsPerPage:10,pagingTextBox:!1,previousNextArrows:!0,firstLastArrows:!1,pagingLinks:2,pageSizeOptions:[],i18nPagination:x,showFooter:!0,_currentPage:1,_total:0,buildRendering:function(){this.inherited(arguments);
var f=this,b=this.paginationNode=d(this.footerNode,"div.dgrid-pagination"),a=this.paginationStatusNode=d(b,"div.dgrid-status"),h=this.pageSizeOptions,g=this.i18nPagination;a.tabIndex=0;if(h.length){var e=d(b,"select.dgrid-page-size"),c;for(c=0;c<h.length;c++)d(e,"option",h[c],{value:h[c]});m(e,"change",function(){f.rowsPerPage=+e.value;f.gotoPage(1)})}a.innerHTML=t.substitute(g.status,{start:1,end:1,total:0});b=this.paginationNavigationNode=d(b,"div.dgrid-navigation");this.firstLastArrows&&(a=d(b,
"a[href\x3djavascript:].dgrid-first","\u00ab"),a.setAttribute("aria-label",g.gotoFirst));this.previousNextArrows&&(a=d(b,"a[href\x3djavascript:].dgrid-previous","\u2039"),a.setAttribute("aria-label",g.gotoPrev));this.paginationLinksNode=d(b,"span.dgrid-pagination-links");this.previousNextArrows&&(a=d(b,"a[href\x3djavascript:].dgrid-next","\u203a"),a.setAttribute("aria-label",g.gotoNext));this.firstLastArrows&&(a=d(b,"a[href\x3djavascript:].dgrid-last","\u00bb"),a.setAttribute("aria-label",g.gotoLast));
m(b,"a:click",function(){var a=this.className,d,b;f._isLoading||-1<a.indexOf("dgrid-page-disabled")||(d=f._currentPage,b=Math.ceil(f._total/f.rowsPerPage),"dgrid-page-link"==a?f.gotoPage(+this.innerHTML,!0):"dgrid-first"==a?f.gotoPage(1):"dgrid-last"==a?f.gotoPage(b):"dgrid-previous"==a?f.gotoPage(d-1):"dgrid-next"==a&&f.gotoPage(d+1))})},_updateNavigation:function(f){function b(b){var c;a.pagingTextBox&&b==e?(c=d(g,"input.dgrid-page-input[type\x3dtext][value\x3d$]",e),c.setAttribute("aria-label",
h.jumpPage),a._pagingTextBoxHandle=m(c,"change",function(){var b=+this.value;!isNaN(b)&&(0<b&&b<=l)&&a.gotoPage(+this.value,!0)})):(c=d(g,"a[href\x3djavascript:]"+(b==e?".dgrid-page-disabled":"")+".dgrid-page-link",b),c.setAttribute("aria-label",h.gotoPage));b==e&&f&&c.focus()}var a=this,h=this.i18nPagination,g=this.paginationLinksNode,e=this._currentPage,c=this.pagingLinks,k=this.paginationNavigationNode,l=Math.ceil(this._total/this.rowsPerPage),n=this._pagingTextBoxHandle;n&&n.remove();g.innerHTML=
"";s(".dgrid-first, .dgrid-previous",k).forEach(function(a){d(a,(1==e?".":"!")+"dgrid-page-disabled")});s(".dgrid-last, .dgrid-next",k).forEach(function(a){d(a,(e>=l?".":"!")+"dgrid-page-disabled")});if(c&&0<l){b(1);k=e-c;for(2<k?d(g,"span.dgrid-page-skip","..."):k=2;k<Math.min(e+c+1,l);k++)b(k);e+c+1<l&&d(g,"span.dgrid-page-skip","...");b(l)}else a.pagingTextBox&&b(e)},refresh:function(){if(!this.store)throw Error("Pagination requires a store to operate.");this.inherited(arguments);this.gotoPage(1)},
gotoPage:function(f,b){var a=this;this._trackError(function(){var h=a.rowsPerPage,g=(f-1)*h,e=w.mixin(a.get("queryOptions"),{start:g,count:h}),c,k=a.contentNode,l=a._rowIdToObject,n=5+a.id.length,m,p;for(m in l)a.row(m.substr(n)).remove();a._rowIdToObject={};k.innerHTML="";p=d(k,"div.dgrid-loading");p.innerHTML=a.loadingMessage;a._isLoading=!0;c=a.store.query(a.query,e);return r.when(a.renderArray(c,p,e),function(){d(p,"!");delete a._isLoading;a.scrollTo({y:0});r.when(c.total,function(c){c||(a.noDataNode=
d(a.contentNode,"div.dgrid-no-data"),a.noDataNode.innerHTML=a.noDataMessage);a.paginationStatusNode.innerHTML=t.substitute(a.i18nPagination.status,{start:Math.min(g+1,c),end:Math.min(c,g+h),total:c});a._total=c;a._currentPage=f;a._updateNavigation(b)});(7>q("ie")||q("ie")&&q("quirks"))&&a.resize()},function(b){delete a._isLoading;throw b;})})}})});